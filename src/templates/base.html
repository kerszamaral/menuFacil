<!-- templates/base.html -->
<!DOCTYPE html>
{% load static %}
{% load cart_tags %}
<html>
  <head>
    <meta charset="utf-8" />

    <title>
      {% block title %}
        Base Page - menuFacil
      {% endblock %}
    </title>

    <link rel="shortcut icon" type= "image/png" href="{% static 'menuFacil/images/favicon.ico' %}"/>
    <link rel="stylesheet" href="{% static 'menuFacil/css/style.css' %}" />
    <script src="{% static 'menuFacil/js/jquery-3.7.1.min.js' %}"></script>
    
    <script>
      function SendPost(csrf, url, data, success, error) {
        $.ajax({
          url: url,
          type: "POST",
          headers: {'X-CSRFToken': csrf},
          data: data,
          dataType: "json",
          success: success,
          error: error
        });
      }
    </script>
    
    {% block head %}
    {% endblock %}
  </head>

  <body style = "margin:0">

    <main>
      {% block topbar %}
        <div class="topnav">
          <a class="active" href="{% url 'restaurant:index' %}">Home</a>

          {% if user.is_authenticated %}

            {% if user.is_staff %}
              <a href="{% url 'admin:index' %}">Admin</a>
              <a href="{% url 'tab:confirm' %}">Confirm Payment</a>
            {% endif %}

            <a href="{% url 'account:profile' %}">Account: {{ user.username }}</a>
            <a href="{% url 'tab:history' %}">History</a>

          {% else %}
            <a href="{% url 'account:login' %}">Log In</a>
            <a href="{% url 'account:signup' %}">Sign Up</a>
          {% endif %}
          
          {% cart_length cart.id request.session request.user as cart_length %}
          <a href="{% url 'cart:details' %}">
            Cart {% if cart_length %}({{ cart_length }}){% endif %}
          </a>
          <a href="{% url 'tab:details' %}">Tab</a>
        </div>


        <div class="messages">
          {% if messages %}
            {% for message in messages %}
              <a{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</a>
            {% endfor %}
          {% endif %}
        </div>
      {% endblock %}


      {% block content %}
      {% endblock %}
    </main>
  </body>
</html>
